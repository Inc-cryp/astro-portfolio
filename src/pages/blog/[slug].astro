---
import { getProjects, getProjectBySlug } from "@/lib/strapi";

export async function getStaticPaths() {
    const response = await getProjects();

    return response.data.map((p) => ({
        params: { slug: p.slug },
    }));
}

const { slug } = Astro.params;
// const post = (await getPostBySlug(slug)).data[0];

if (!slug) {
    throw new Error(`Project not found for slug: ${slug}`);
}

const project = await getProjectBySlug(slug);

// Jika proyek tidak ditemukan, redirect ke /projects
if (!project) {
    throw new Error(`Project not found for slug: ${slug}`);
}
---
